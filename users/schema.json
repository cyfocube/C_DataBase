{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "CÂ³ Cube User Database Schema",
  "description": "Schema for wallet-based user data storage",
  "type": "object",
  "properties": {
    "walletAddress": {
      "type": "string",
      "pattern": "^0x[a-fA-F0-9]{40}$",
      "description": "Ethereum wallet address (unique identifier)"
    },
    "createdAt": {
      "type": "string",
      "format": "date-time",
      "description": "ISO timestamp when user was first registered"
    },
    "lastActive": {
      "type": "string",
      "format": "date-time",
      "description": "ISO timestamp of last user activity"
    },
    "points": {
      "type": "object",
      "properties": {
        "gamingHub": {
          "type": "object",
          "properties": {
            "blockchainBasics": { "type": "number", "minimum": 0 },
            "smartContracts": { "type": "number", "minimum": 0 },
            "defiProtocols": { "type": "number", "minimum": 0 },
            "nftsWeb3": { "type": "number", "minimum": 0 }
          },
          "required": ["blockchainBasics", "smartContracts", "defiProtocols", "nftsWeb3"]
        },
        "storyMode": {
          "type": "object",
          "properties": {
            "chaptersCompleted": { "type": "number", "minimum": 0 },
            "totalScore": { "type": "number", "minimum": 0 }
          },
          "required": ["chaptersCompleted", "totalScore"]
        },
        "achievements": {
          "type": "object",
          "properties": {
            "firstQuest": { "type": "boolean" },
            "cryptoNovice": { "type": "boolean" },
            "blockchainExplorer": { "type": "boolean" },
            "defiMaster": { "type": "boolean" },
            "speedLearner": { "type": "boolean" },
            "perfectionist": { "type": "boolean" }
          },
          "required": ["firstQuest", "cryptoNovice", "blockchainExplorer", "defiMaster", "speedLearner", "perfectionist"]
        },
        "total": { "type": "number", "minimum": 0 }
      },
      "required": ["gamingHub", "storyMode", "achievements", "total"]
    },
    "progress": {
      "type": "object",
      "properties": {
        "completedNodes": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Array of completed quest/challenge identifiers"
        },
        "currentQuest": {
          "oneOf": [
            { "type": "null" },
            { "type": "string" }
          ],
          "description": "Currently active quest ID or null"
        },
        "level": { "type": "number", "minimum": 1 },
        "xp": { "type": "number", "minimum": 0 }
      },
      "required": ["completedNodes", "currentQuest", "level", "xp"]
    },
    "settings": {
      "type": "object",
      "properties": {
        "autoSync": { "type": "boolean", "default": true },
        "notifications": { "type": "boolean", "default": true }
      },
      "required": ["autoSync", "notifications"]
    }
  },
  "required": ["walletAddress", "createdAt", "lastActive", "points", "progress", "settings"],
  "additionalProperties": false
}