{
  "id": "a_1729818400_dex004",
  "question_id": "q_1729817000_abc001", 
  "content": "@LearningDev Great questions!\n\n**Square Root Formula:**\nYes, this is Uniswap V2's approach. The geometric mean `sqrt(x * y)` ensures that:\n1. LP tokens represent proportional ownership regardless of deposit size\n2. No matter how the pool ratio changes, your share remains mathematically fair\n3. Prevents manipulation where someone could drain value by depositing tokens strategically\n\n**Initial Liquidity Protection:**\nFor the first LP, you're right - they set the initial price! Here's how to handle it:\n\n```solidity\nfunction addInitialLiquidity(uint256 amountA, uint256 amountB) external {\n    require(totalSupply() == 0, 'Pool already initialized');\n    \n    // Minimum liquidity lock (burns 1000 LP tokens forever)\n    uint256 liquidity = Math.sqrt(amountA * amountB);\n    require(liquidity > 1000, 'Insufficient initial liquidity');\n    \n    _mint(address(0), 1000); // Burn minimum liquidity\n    _mint(msg.sender, liquidity - 1000);\n    \n    reserveA = amountA;\n    reserveB = amountB;\n}\n```\n\nThis prevents someone from setting a 1000:1 ratio with tiny amounts and manipulating the pool.\n\n**Pro tip:** Many protocols now require a minimum initial deposit (like 1 ETH worth) and often the deployer adds balanced liquidity immediately after deployment.",
  "author_wallet": "0x5555666677778888999900001111222233334444",
  "author_name": "DeFiVet",
  "created_at": "2025-10-24T09:00:00Z",
  "updated_at": "2025-10-24T09:00:00Z", 
  "votes": 8,
  "is_accepted": false,
  "parent_answer_id": "a_1729818200_dex003",
  "reply_count": 0,
  "depth": 2,
  "code_snippets": [
    {
      "language": "solidity",
      "code": "function addInitialLiquidity(uint256 amountA, uint256 amountB) external {\n    require(totalSupply() == 0, 'Pool already initialized');\n    uint256 liquidity = Math.sqrt(amountA * amountB);\n    require(liquidity > 1000, 'Insufficient initial liquidity');\n    _mint(address(0), 1000);\n    _mint(msg.sender, liquidity - 1000);\n}"
    }
  ],
  "helpful_votes": 7,
  "spam_reports": 0
}